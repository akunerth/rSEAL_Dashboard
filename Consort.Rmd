---
title: "Consort"
author: 
date: "Last Updated: 10/28/2020"
output: 
  html_document:
    theme: flatly
    toc: TRUE
---
```{r load-packages, echo=FALSE, warning=FALSE, include=FALSE, cache=FALSE}

knitr::opts_chunk$set(echo = TRUE)
library(readxl)
library(knitr)
library(ggpubr)
library(plotly)
library(emmeans)
library(papaja)
library(kableExtra)
library(dplyr)
library(tidyverse)
library(ggformula)
library(lubridate)
library(plyr)
library(RColorBrewer)
library(DiagrammeR)
library(DiagrammeRsvg)
library(rsvg)
options(knitr.table.format = "html", knitr.kable.NA = '') 
```

```{r DK Log variable setup, echo = FALSE, message=FALSE}
#DK Data

DKdata <- data.frame(read.csv(file = '/Volumes/psy-ctn/psy-ctn/SNAPLab/SNAP Projects/SEAL/00_rSEAL/02_rSEAL_Data/PreStudy/DK_Log/Raw_Data/DKLog_rSEAL_23OCT2020.csv'))

DKParsedData <- select (DKdata, rseal_dkid,rseal_dklog_006:rseal_dk_log_complete )

```


```{r Consort Diagram, echo = FALSE, message=FALSE}
#Consort Diagram Assign Variables

TotalContact <-nrow(DKParsedData)
Interested <- nrow(subset(DKParsedData, DKParsedData$rseal_dk_log_009 == '1'))
NotInterested <- subset(DKParsedData, DKParsedData$rseal_dk_log_009 == '0')
NotInterested <- nrow(NotInterested)
Complete <- subset(DKParsedData, DKParsedData$rseal_dk_log_complete == '2')
Complete <- nrow(Complete)
Eligible <- subset(DKParsedData, DKParsedData$rseal_dklog_038 == '2')
Eligible <- nrow(Eligible)
NoEligible <- subset(DKParsedData, DKParsedData$rseal_dklog_038 == '0')
NoEligible <- nrow(NoEligible)
Unver <- subset(DKParsedData, DKParsedData$rseal_dklog_038 == '2')
Unver <- nrow(Unver)
Recruitment <- DKParsedData$rseal_dklog_006

grViz("digraph consort {

# node definitions with substituted label text
node [shape = rectangle, fontname = Helvetica, penwidth = 2.0, fontname = Helvetica]
A [label = '@@1']
B [label = '@@2']
C [label = '@@3']
D [label = '@@4', href='./Sources.html']
F [label = '@@5']
G [label = '@@6']
H [label = '@@7']
I [label = '@@8']
J [label = '@@9']
K [label = '@@10']
L [label = '@@11']
M [label = '@@12']
N [label = '@@13']
O [label = '@@14']
P [label = '@@15']
Q [label = '@@16']
R [label = '@@17']
A -> B; A->D; B->C;B->F; B->G; C->H; H->I; H->J;I->K; I->L; K->M; K->N; M->O; M->P; O->Q; O->R
}

#Define Labels


[1]: paste0('Total in DK Log (n = ', TotalContact, ')')
[2]: paste0('Total Interested (n = ', Interested, ')')
[3]: paste0('Total Eligible (n = ', Eligible, ')')
[4]: paste0('Not Interested (n = ', NotInterested, ')')
[5]: paste0('Total Not Eligible (n = ', NoEligible, ')')
[6]: paste0('Total Unverified (n = ', Unver, ')')
[7]: paste0('Intro Call Scheduled (n = ', Unver, ')')
[8]: paste0('Intro Call Complete (n = ', Unver, ')')
[9]: paste0('Not Enrolled (n = ', Unver, ')')
[10]:paste0('Wave 1 Assessment Complete (n = ', Unver, ')')
[11]:paste0('Wave 1 Assessment Dropout (n = ', Unver, ')')
[12]:paste0('Intervention Complete (n = ', Unver, ')')
[13]:paste0('Intervention Dropout (n = ', Unver, ')')
[14]:paste0('Wave 2 Complete (n = ', Unver, ')')
[15]:paste0('Wave 2 Dropout (n = ', Unver, ')')
[16]:paste0('Wave 3 Complete (n = ', Unver, ')')
[17]:paste0('Wave 3 Dropout (n = ', Unver, ')')
")

```
